{
  "hash": "e49a0f450626e6f8b3b6eb3a7945d953",
  "result": {
    "markdown": "---\ntitle: \"Visualizing spatial data with ggplot2\"\ndate-meta: 2023-09-06\nexecute: \n  error: true\nformat: \n  revealjs:\n    code-link: true\n    output-location: column-fragment\n    scrollable: true\n---\n\n::: {.cell}\n\n:::\n\n\n\n# Overview\n\n-   Why and how do we visualize spatial data?\n-   What is the \"grammar of graphics\"?\n-   How to use `{ggplot2}` to\n    -   build layered data visualizations\n    -   visualize spatial data\n\n# Why and how do we visualize spatial data?\n\n## Why do we visualize spatial data?\n\nWhy do we visualize spatial data?\n\n- Validation\n- Exploration\n- Communication\n\n----\n\n## Anscombe's quartet\n\nTo illustrate why visualization is essential, let's look at the Anscombe's Quartet data:\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"jzfidggkhf\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>@import url(\"https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n@import url(\"https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n#jzfidggkhf table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#jzfidggkhf thead, #jzfidggkhf tbody, #jzfidggkhf tfoot, #jzfidggkhf tr, #jzfidggkhf td, #jzfidggkhf th {\n  border-style: none;\n}\n\n#jzfidggkhf p {\n  margin: 0;\n  padding: 0;\n}\n\n#jzfidggkhf .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#jzfidggkhf .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#jzfidggkhf .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#jzfidggkhf .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#jzfidggkhf .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#jzfidggkhf .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#jzfidggkhf .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#jzfidggkhf .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#jzfidggkhf .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#jzfidggkhf .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#jzfidggkhf .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#jzfidggkhf .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#jzfidggkhf .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#jzfidggkhf .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#jzfidggkhf .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jzfidggkhf .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#jzfidggkhf .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#jzfidggkhf .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#jzfidggkhf .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jzfidggkhf .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#jzfidggkhf .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jzfidggkhf .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#jzfidggkhf .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jzfidggkhf .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#jzfidggkhf .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jzfidggkhf .gt_left {\n  text-align: left;\n}\n\n#jzfidggkhf .gt_center {\n  text-align: center;\n}\n\n#jzfidggkhf .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#jzfidggkhf .gt_font_normal {\n  font-weight: normal;\n}\n\n#jzfidggkhf .gt_font_bold {\n  font-weight: bold;\n}\n\n#jzfidggkhf .gt_font_italic {\n  font-style: italic;\n}\n\n#jzfidggkhf .gt_super {\n  font-size: 65%;\n}\n\n#jzfidggkhf .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#jzfidggkhf .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#jzfidggkhf .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#jzfidggkhf .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#jzfidggkhf .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#jzfidggkhf .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#jzfidggkhf .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"\"></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"x\">x</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"y\">y</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"\"></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"x\">x</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"y\">y</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"\"></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"x\">x</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"y\">y</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"\"></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"x\">x</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"y\">y</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">10</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.04</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">10</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.14</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">10</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7.46</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">6.58</td></tr>\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">6.95</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.14</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">6.77</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">5.76</td></tr>\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">13</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7.58</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">13</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.74</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">13</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">12.74</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7.71</td></tr>\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.81</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.77</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7.11</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.84</td></tr>\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">11</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.33</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">11</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.26</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">11</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7.81</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.47</td></tr>\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">14</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.96</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">14</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.10</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">14</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.84</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7.04</td></tr>\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">6</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7.24</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">6</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">6.13</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">6</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">6.08</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">5.25</td></tr>\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">4</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">4.26</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">4</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">3.10</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">4</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">5.39</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">19</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">12.50</td></tr>\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">12</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">10.84</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">12</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.13</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">12</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8.15</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">5.56</td></tr>\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">4.82</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7.26</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">6.42</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">7.91</td></tr>\n    <tr><td headers=\"set...1\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">I</td>\n<td headers=\"x...2\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">5</td>\n<td headers=\"y...3\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">5.68</td>\n<td headers=\"set...4\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">II</td>\n<td headers=\"x...5\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">5</td>\n<td headers=\"y...6\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">4.74</td>\n<td headers=\"set...7\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">III</td>\n<td headers=\"x...8\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">5</td>\n<td headers=\"y...9\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">5.73</td>\n<td headers=\"set...10\" class=\"gt_row gt_center\" style=\"font-family: 'Atkinson Hyperlegible'; font-size: small; font-weight: bold; background-color: rgba(190,190,190,0.25);\">IV</td>\n<td headers=\"x...11\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">8</td>\n<td headers=\"y...12\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">6.89</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n::: footer\nThis data is from the `{Tmisc}` package but can be found in many places.\n:::\n\n----\n\nHard to make sense of all those numbers at once.\n\nWhat if we use some summary statistics and get the mean, standard deviation, and Pearson correlation coefficient for x and y by set:\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"lfijghkaom\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>@import url(\"https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n@import url(\"https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n#lfijghkaom table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#lfijghkaom thead, #lfijghkaom tbody, #lfijghkaom tfoot, #lfijghkaom tr, #lfijghkaom td, #lfijghkaom th {\n  border-style: none;\n}\n\n#lfijghkaom p {\n  margin: 0;\n  padding: 0;\n}\n\n#lfijghkaom .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#lfijghkaom .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#lfijghkaom .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#lfijghkaom .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#lfijghkaom .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#lfijghkaom .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#lfijghkaom .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#lfijghkaom .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#lfijghkaom .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#lfijghkaom .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#lfijghkaom .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#lfijghkaom .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#lfijghkaom .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#lfijghkaom .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#lfijghkaom .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lfijghkaom .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#lfijghkaom .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#lfijghkaom .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#lfijghkaom .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lfijghkaom .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#lfijghkaom .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lfijghkaom .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#lfijghkaom .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lfijghkaom .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lfijghkaom .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lfijghkaom .gt_left {\n  text-align: left;\n}\n\n#lfijghkaom .gt_center {\n  text-align: center;\n}\n\n#lfijghkaom .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#lfijghkaom .gt_font_normal {\n  font-weight: normal;\n}\n\n#lfijghkaom .gt_font_bold {\n  font-weight: bold;\n}\n\n#lfijghkaom .gt_font_italic {\n  font-style: italic;\n}\n\n#lfijghkaom .gt_super {\n  font-size: 65%;\n}\n\n#lfijghkaom .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#lfijghkaom .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#lfijghkaom .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#lfijghkaom .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#lfijghkaom .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#lfijghkaom .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#lfijghkaom .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"\"></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"mean_x\">mean_x</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"mean_y\">mean_y</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"sd_x\">sd_x</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"sd_y\">sd_y</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-family: 'Atkinson Hyperlegible'; font-weight: bold;\" scope=\"col\" id=\"r\">r</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_row_group_first\"><td headers=\"I stub_1_1 stub_1\" rowspan=\"1\" class=\"gt_row gt_left gt_stub_row_group\" style=\"font-size: small; font-weight: bold;\">I</td>\n<td headers=\"I stub_1_1 mean_x\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.00</td>\n<td headers=\"I stub_1_1 mean_y\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.00</td>\n<td headers=\"I stub_1_1 sd_x\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">3.32</td>\n<td headers=\"I stub_1_1 sd_y\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">2.03</td>\n<td headers=\"I stub_1_1 r\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">0.82</td></tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"II stub_1_2 stub_1\" rowspan=\"1\" class=\"gt_row gt_left gt_stub_row_group\" style=\"font-size: small; font-weight: bold;\">II</td>\n<td headers=\"II stub_1_2 mean_x\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.00</td>\n<td headers=\"II stub_1_2 mean_y\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.00</td>\n<td headers=\"II stub_1_2 sd_x\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">3.32</td>\n<td headers=\"II stub_1_2 sd_y\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">2.03</td>\n<td headers=\"II stub_1_2 r\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">0.82</td></tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"III stub_1_3 stub_1\" rowspan=\"1\" class=\"gt_row gt_left gt_stub_row_group\" style=\"font-size: small; font-weight: bold;\">III</td>\n<td headers=\"III stub_1_3 mean_x\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.00</td>\n<td headers=\"III stub_1_3 mean_y\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.00</td>\n<td headers=\"III stub_1_3 sd_x\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">3.32</td>\n<td headers=\"III stub_1_3 sd_y\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">2.03</td>\n<td headers=\"III stub_1_3 r\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">0.82</td></tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"IV stub_1_4 stub_1\" rowspan=\"1\" class=\"gt_row gt_left gt_stub_row_group\" style=\"font-size: small; font-weight: bold;\">IV</td>\n<td headers=\"IV stub_1_4 mean_x\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.00</td>\n<td headers=\"IV stub_1_4 mean_y\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">9.00</td>\n<td headers=\"IV stub_1_4 sd_x\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">3.32</td>\n<td headers=\"IV stub_1_4 sd_y\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">2.03</td>\n<td headers=\"IV stub_1_4 r\" class=\"gt_row gt_right\" style=\"font-family: 'Atkinson Hyperlegible';\">0.82</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n----\n\nNow, take another look using a plot:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n\nWhat do you *see*?\n\n## How do we visualize spatial data?\n\n:::: {.columns}\n\n::: {.column width='50%'}\nA map is a special type of data visualization for spatial data but it isn't the only one.\n\n**Plots** and **tables** are two other common ways to visualize spatial data.\n:::\n\n::: {.column width='50%'}\n![Key for interpreting Sanborn fire insurance maps courtesy [Library of Congress](https://www.loc.gov/collections/sanborn-maps/about-this-collection/)](https://www.loc.gov/rr/geogmap/sanborn/images/sankey22c.jpg)\n:::\n\n::::\n\n----\n\n:::: {.columns}\n\n::: {.column width='40%'}\nGraphics can be further transformed using **animation** and **interactivity**. Maps, graphics, and tables also vary in **format**: print, web, mobile, etc.\n\n:::\n\n::: {.column width='60%'}\n![](https://media.giphy.com/media/xUA7aUs09Brz1ZED72/giphy.gif)\n:::\n\n::::\n\n# What is the \"grammar of graphics\"?\n\n![Image adapted from The Grammar of Graphics for Introduction to data visualisation with ggplot2 QCBS R Workshop Series](https://r.qcbs.ca/workshop03/book-en/images/gglayers.png)\n\n----\n\n- Data\n- Mapping\n- Statistics\n- Scales\n- Geometries\n- Facets\n- Coordinates\n- Theme\n\n::: footer\nThis introduction to the \"grammar of graphics\" is based largely on a 2020 ggplot2 workshop ([part 1](https://www.youtube.com/watch?v=h29g21z0a68)) by Thomas Lin Pedersen.\n:::\n\n## Data\n\n- Structure and representation of data determines what you can and can't do with it\n- Data is expected to be in a \"tidy\" format (also known as long format data)\n\n----\n\nA few definitions (from [Ch. 2 of R for Data Science](https://r4ds.hadley.nz/data-visualize)):\n\n-   variable: a quantity, quality, or property that you can measure.\n-   value: the state of a variable when you measure it. The value of a variable may change from measurement to measurement.\n-   observation: a set of measurements made under similar conditions\n-   tabular data: a set of values, each associated with a variable and an observation.\n\n----\n\nWhat works best with the grammar of graphics is **tidy data**:\n\n-   each value is placed in its own \"cell\",\n-   each variable in its own column, and\n-   each observation in its own row.\n\n## Mapping\n\n- Allow data to be understood by the graphics system through:\n\n  - Aesthetic mapping: variables -> graphical properties in the geometry\n  - Facet mapping: variables -> panels in layout\n\n## Statistics\n\n- Data may not represent the displayed values\n\n- Statistics transform input variables into displayed values, e.g.\n\n  - Counting the number of observations by category\n  - Calculating summary statistics for a boxplot\n  \n::: footer\nStatistics can be used prior to plotting data or used by a plotting function directly.\n:::\n\n## Scales\n\n- Scales translate between value ranges and graphical properties, e.g.\n\n  - Categories -> Colors\n  - Numbers -> Position\n  \n- Scales use a specific type of interpolation, e.g. discrete, continuous, etc., so not all scales work with all variables.\n\n::: footer\nIn the not too common case where data directly represents a graphical property, e.g. a \"color\" column, you can use a special type of scale called an \"identity\" scale.\n:::\n\n## Geometries\n\n- How translate aesthetics into graphical representations\n\n- Basic geometries (e.g. points, lines, polygons) can be combined into more complex geometries (e.g. box plot, map)\n\n- Typically, the geometries are the same as the \"type\" of plot\n\n## Facets\n\n- Defines how data is split across multiple panels\n\n## Coordinates\n\n- Positional aesthetics must be interpreted by a coordinate system\n\n- Defines the physical mapping of aesthetics to the paper\n\n::: footer\nWe usually think about the [cartesian coordinate system](https://en.wikipedia.org/wiki/Cartesian_coordinate_system)—but there are a lot of different kinds of coordinate systems.\n:::\n\n## Theme\n\n- Every part of the graphic that *isn't* linked to the data:\n\n  - Fonts\n  - Spacing\n  - Colors \n  - Weights\n  - etc.\n\n# How to to use `{ggplot2}` to...\n\n-   build layered data visualizations\n-   visualize spatial data\n\n# Build layered data visualizations\n\n## Setup packages\n\nFor this session, we are going to use the `{ggplot2}` and `{dplyr}` packages:\n\n\n::: {.cell output-location='default'}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(sf)\n```\n:::\n\n\n## Setup data\n\nWe are also going to use the `storms` data included with `{dplyr}`.\n\nTake a quick look at `storms` using `glimpse()`:\n\n\n::: {.cell output-location='fragment'}\n\n```{.r .cell-code}\nglimpse(storms)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 19,066\nColumns: 13\n$ name                         <chr> \"Amy\", \"Amy\", \"Amy\", \"Amy\", \"Amy\", \"Amy\",…\n$ year                         <dbl> 1975, 1975, 1975, 1975, 1975, 1975, 1975,…\n$ month                        <dbl> 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,…\n$ day                          <int> 27, 27, 27, 27, 28, 28, 28, 28, 29, 29, 2…\n$ hour                         <dbl> 0, 6, 12, 18, 0, 6, 12, 18, 0, 6, 12, 18,…\n$ lat                          <dbl> 27.5, 28.5, 29.5, 30.5, 31.5, 32.4, 33.3,…\n$ long                         <dbl> -79.0, -79.0, -79.0, -79.0, -78.8, -78.7,…\n$ status                       <fct> tropical depression, tropical depression,…\n$ category                     <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ wind                         <int> 25, 25, 25, 25, 25, 25, 25, 30, 35, 40, 4…\n$ pressure                     <int> 1013, 1013, 1013, 1013, 1012, 1012, 1011,…\n$ tropicalstorm_force_diameter <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ hurricane_force_diameter     <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n```\n\n\n:::\n:::\n\n\n::: footer\nWhen we use `storms`, it is important to remember that each row is an **observation** of a storm, not a summary feature for an individual storm.\n:::\n\n----\n\n![](https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExaWtjY2dycDRzZ2djNHQ4MDh6Nm50dGYzbWF4ZHNkNGdkc3N2azB3OSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/7j0i4tSogPfq9rDxsB/giphy.gif)\n\n::: footer\n`storms` is a subset of a larger [Atlantic hurricane database (HURDAT2)](https://www.nhc.noaa.gov/data/#hurdat) with data from 1851 to 2022. Since 1974, NOAA's [Geostationary Operational Environmental Satellite](https://en.wikipedia.org/wiki/Geostationary_Operational_Environmental_Satellite) program has played a key role in tracking storms and monitoring weather around the world.\n:::\n\n## Create a ggplot\n\nWe can start by using the function `ggplot()` to define a plot object. Set `storm` as the input data for `ggplot()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = storms)\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\n. . .\n\n::: {.smaller}\nWell, that doesn't look like much. 🤔\n\nThis is the first step in creating a plot that we can add layers to. Parameters set with `ggplot()` can be \"inherited\" by layers added later.\n:::\n\n## Add aesthetics and layers\n\n### Set mapping with `aes()`\n\nNext, we can set the mapping using the `aes()` function. We can start by mapping `long` (longitude) to `x` and `lat` (latitude) to `y`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = storms,\n  mapping = aes(\n    x = long,\n    y = lat\n  )\n)\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\nBefore we can see any data, we need to tell `ggplot()` how we want to represent the data using layers.\n\n::: notes\nThe mapping argument of the ggplot() function defines how variables in your dataset are mapped to visual properties (aesthetics) of your plot.\n:::\n\n----\n\nLayers in `{ggplot2}` are most often added using \"geoms\" (short for geometry) functions like `geom_point()`, `geom_col()`, or `geom_histogram()`.\n\nLet's give it a try using `geom_point()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = storms,\n  mapping = aes(\n    x = long,\n    y = lat\n  )\n) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n----\n\nYou can define the `data` and `mapping` parameters globally using `ggplot()` or locally for a single geom function. This code does the exact same thing as the prior block:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_point(\n    mapping = aes(\n      x = long,\n      y = lat\n    ),\n    data = storms\n  )\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-10-1.png){width=960}\n:::\n:::\n\n\n----\n\n### What is this `+` operator?\n\nNotice that we are combining the `ggplot()` and `geom_point()` functions using the `+` operator. This is a style of function or operator known as an [infix operator](https://en.wikipedia.org/wiki/Infix_notation).\n\nNext week, we will introduce a similar function known as a pipe, `%>%` or `|>` that works to pass the output from one function (or line of code) into the next line as the first parameter in a function.\n\n----\n\nFor example, see how we can use a series of pipes to operate on the storms data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstorms |>\n  distinct(name)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 258 × 1\n   name    \n   <chr>   \n 1 Amy     \n 2 Blanche \n 3 Caroline\n 4 Doris   \n 5 Eloise  \n 6 Faye    \n 7 Gladys  \n 8 Hallie  \n 9 Belle   \n10 Dottie  \n# ℹ 248 more rows\n```\n\n\n:::\n:::\n\n\n----\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstorms |>\n  distinct(name) |> \n  nrow()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 258\n```\n\n\n:::\n:::\n\n\n----\n\nThe prior block is the same as the following block:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstorm_names <- distinct(storms, name)\nnrow(storm_names)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 258\n```\n\n\n:::\n:::\n\n\n::: footer\nUsing pipes can help avoid the need for intermediate objects like `storm_names` that might only exist to move the output of one function to the input for another function.\n:::\n\n----\n\nThe first parameter for `ggplot()` is `data` and the first parameter for all geom functions is `mapping` so you often see these passed as unnnamed parameters:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(storms) +\n  geom_point(\n    aes(\n      x = long,\n      y = lat\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n\n\n---\n\nYou can even leave off the x and y parameter names:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(storms) +\n  geom_point(aes(long, lat))\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-15-1.png){width=960}\n:::\n:::\n\n\n----\n\n# Mapping variables are not strings!\n\nThe variables passed to `aes()` don't have quotes around them! This is because `aes()` is a data-masking (also known as a quoting function) where the inputs are evaluated in the context of the data.\n\nTLDR: only put quotes around your aesthetic mappings when you want to pass a literal string.\n\n----\n\nNext we can map one of the variables (`status` or storm classification) to an aesthetic (`color`):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(storms) +\n  geom_point(aes(long, lat, color = status))\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-16-1.png){width=960}\n:::\n:::\n\n\nNote that we now have a legend, added automatically when we defined a mapping to color. Since color is not a \"positional aesthetic\" we can't easily interpret the meaning of the graphic without a legend, labels, or annotations.\n\n\n----\n\nIn addition to having mapped aesthetics, we can also have \"fixed\" aesthetics (fixed because the same value is used for every observation in the plot). When you have a lot of overlapping features (known as overplotting), you may want to reduce the `alpha` (or transparency) of the features:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(storms) +\n  geom_point(\n    aes(x = long,\n    y = lat,\n    color = status),\n  alpha = 0.4\n  )\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-17-1.png){width=960}\n:::\n:::\n\n\nFixed aesthetics should be defined for each geom—they are ignored if you pass them to `ggplot()`.\n\n----\n\nAesthetics can also be defined using a function. In this example, we are using the boolean operator `==` to compare the values from \"status\" to the string \"hurricane\":\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = storms,\n  mapping = aes(\n    x = long,\n    y = lat,\n    color = status == \"hurricane\"\n  )\n) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-18-1.png){width=960}\n:::\n:::\n\n\n\n## Visualizing distributions\n\n## Distribution of one numeric variable\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = storms,\n  mapping = aes(y = lat)\n) +\n  geom_histogram(bins = 90)\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-19-1.png){width=960}\n:::\n:::\n\n\n## Distribution of one numeric variable\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = storms,\n  mapping = aes(x = lat)\n) +\n  geom_freqpoly(binwidth = 1)\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-20-1.png){width=960}\n:::\n:::\n\n\n## Distribution of one categorical variable\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data = storms,\n  mapping = aes(y = category)\n) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-21-1.png){width=960}\n:::\n:::\n\n\n# Visualize spatial data\n\nTo start, let's convert our storms data set from a data frame into a sf object using `sf::st_as_sf()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstorms_sf <- sf::st_as_sf(\n    storms,\n    coords = c(\"long\", \"lat\"),\n    crs = 4326\n  )\n```\n:::\n\n\n:::{.callout-tip collapse=false appearance='default' icon=true}\n# Always supply coordinates with longitude before latitude!\n`sf::st_as_sf()` requires that you supply coordinates in lon lat order. This is also the standard order for GeoJSON files, Shapefiles, and KML files. Check out [lon lat lat lon by Tom MacWright](https://macwright.com/lonlat/) for more information.\n:::\n\n----\n\nFinally, we can look at these observations on a map:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = storms_sf) +\n  geom_sf(aes(color = status))\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-23-1.png){width=960}\n:::\n:::\n\n\n----\n\nThat first map may not look much different.\n\nBut converting the data to a `sf` object allows us to use `coord_sf()` to transform the coorindate reference system on the fly:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = storms_sf) +\n  geom_sf(aes(color = status)) +\n  coord_sf(crs = \"EPSG:3035\")\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-24-1.png){width=960}\n:::\n:::\n\n\n----\n\nThis is equivalent to converting the coordinate reference system in advance using `st_transform()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstorms_sf |> \n  st_transform(2804) |> \n  ggplot() +\n  geom_sf(aes(color = status))\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-25-1.png){width=960}\n:::\n:::\n\n\nNote, that this is another example of how we can use the pipe (`|>`) to move data between functions in R.\n\n----\n\nHowever, to really show the potential, we need some more data. Install and load the `{rnaturalearth}` package and then load data for the coastline and countries:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# pak::pkg_install(c(\"rnaturalearth\", \"rnaturalearthdata\"))\nlibrary(rnaturalearth)\n\ncoastline <- ne_coastline(returnclass = \"sf\")\n\ncountries <- ne_countries(returnclass = \"sf\")\n```\n:::\n\n\n----\n\nPut them together and we are starting to get somehwere:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = storms_sf, aes(color = status)) +\n  geom_sf(data = coastline, color = \"white\")\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-27-1.png){width=960}\n:::\n:::\n\n\n----\n\nBut the map is zoomed out to show the whole world—not just the north Atlantic storm observations. We can use the xlim and ylim parameters of `coord_sf()` to \"zoom\" in on a smaller area:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstorms_bbox <- storms_sf |> \n  st_transform(\"EPSG:3035\") |> \n  st_bbox()\n\nstorms_map <- ggplot() +\n  geom_sf(data = countries, fill = \"white\") +\n  geom_sf(data = storms_sf, aes(color = category), alpha = 0.3) +\n  geom_sf(data = coastline, color = \"black\") +\n  coord_sf(\n    xlim = c(storms_bbox$xmin, storms_bbox$xmax),\n    ylim = c(storms_bbox$ymin, storms_bbox$ymax),\n    crs = \"EPSG:3035\"\n    )\n\nstorms_map\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-28-1.png){width=960}\n:::\n:::\n\n\n----\n\nTry adding a scale:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstorms_map <- storms_map +\n  scale_color_distiller(type = \"seq\", direction = 1, palette = \"YlOrRd\", na.value = \"gray60\")\n\nstorms_map\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-29-1.png){width=960}\n:::\n:::\n\n\n----\n\nNow try adding some labels:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstorms_map <- storms_map +\n  labs(\n    title = \"Atlantic hurricanes by category, 1975-2021\",\n    caption = \"Data: NOAA Atlantic hurricane database best track data via the {dplyr package}\"\n  )\n\nstorms_map\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-30-1.png){width=960}\n:::\n:::\n\n\n----\n\nLastly, we can adjust the theme:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n storms_map +\n  theme_minimal() +\n  theme(\n    legend.position = \"bottom\"\n  )\n```\n\n::: {.cell-output-display}\n![](data-visualization_files/figure-revealjs/unnamed-chunk-31-1.png){width=960}\n:::\n:::\n\n\n\n----\n\n:::: {.columns}\n\n::: {.column width='40%'}\n![](https://images.routledge.com/common/jackets/amazon/978036749/9780367494759.jpg)\n:::\n\n::: {.column width='60%'}\n\"It's true that there are better and worse ways to make a map but **no one way to make an excellent map**.\"\n\nGretchen N. Peterson in GIS Cartography: A Guide to Effective Map Design\n:::\n\n::::\n\n----\n\nWhat makes a bad map *bad*?\n\nFor new map makers who might not know any better, it is often:\n\n- Confusing or distracting layout\n- Not enough color contrast for features\n- Cluttered labels, legends, or features\n\n----\n\nWhat makes a fine map *just* fine?\n\nFor more experienced map makers who might be in a hurry:\n\n- Not enough thought on font sizes and styling\n- No feature generalization (simplifying geometry where appropriate for the map scale or subject)\n- Inappropriate color scales\n\n----\n\nThere are many cartographic considerations that also apply to other all types of data visualization:\n\n- Layout\n- Fonts (Typography)\n- Colors\n- Output formats\n\n----\n\nBut there are also some cartographic considerations that apply to maps in special and important ways: \n\n- Feature geometry (and cartographic conventions)\n- Projections\n- Scaling\n",
    "supporting": [
      "data-visualization_files/figure-revealjs"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}