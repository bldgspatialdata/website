{
  "hash": "127158860b50a5a66a91fbee5718d9a7",
  "result": {
    "engine": "knitr",
    "markdown": "---\norder: 4\ntitle: \"Creating and manipulating attributes for spatial data\"\ndate: 2023-09-20\n---\n\n\n::: {.cell}\n\n:::\n\n\n## Setup\n\nToday, we are going to use the `{tidyverse}` along with `{sf}` and two related packages: `{lwgeom}` and `{units}`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(lwgeom)\nlibrary(units)\n```\n:::\n\n\n------------------------------------------------------------------------\n\n## Getting started\n\nFor this session, we also need some data to look at. We are going to load data from the U.S. Census Bureau using the `{tigris}` package:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tigris)\noptions(tigris_use_cache = TRUE)\n```\n:::\n\n\n------------------------------------------------------------------------\n\nUse `states()` to load data on U.S. states and `primary_roads()` to load data on U.S. highways:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states <- states()\n\nus_highways <- primary_roads()\n```\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n## Things to remember about spatial data\n\n-   Fields\n-   Objects\n\nCheck out the [Wikipedia article on data models in GIS](https://en.wikipedia.org/wiki/Data_model_(GIS)) for more background on this topic.\n\n## Things to remember about `sf` and `sfc` objects\n\nA `sf` object is a data frame with a `sfc` list-column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states$geometry\n#> Geometry set for 56 features \n#> Geometry type: MULTIPOLYGON\n#> Dimension:     XY\n#> Bounding box:  xmin: -179.2311 ymin: -14.60181 xmax: 179.8597 ymax: 71.43979\n#> Geodetic CRS:  NAD83\n#> First 5 geometries:\n```\n:::\n\n\n## Things to remember about `sf` and `sfc` objects\n\n-   a `sf` object is a data frame with a `sfc` list-column\n-   a `sf` object has a `sf_column` attribute (it isn't always named geometry---use `attributes()` to take a look)\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\nattributes(us_states)\n#> $names\n#>  [1] \"REGION\"   \"DIVISION\" \"STATEFP\"  \"STATENS\"  \"GEOID\"    \"GEOIDFQ\" \n#>  [7] \"STUSPS\"   \"NAME\"     \"LSAD\"     \"MTFCC\"    \"FUNCSTAT\" \"ALAND\"   \n#> [13] \"AWATER\"   \"INTPTLAT\" \"INTPTLON\" \"geometry\"\n#> \n#> $row.names\n#>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24\n#> [25] 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48\n#> [49] 49 50 51 52 53 54 55 56\n#> \n#> $class\n#> [1] \"sf\"         \"data.frame\"\n#> \n#> $sf_column\n#> [1] \"geometry\"\n#> \n#> $agr\n#>   REGION DIVISION  STATEFP  STATENS    GEOID  GEOIDFQ   STUSPS     NAME \n#>     <NA>     <NA>     <NA>     <NA>     <NA>     <NA>     <NA>     <NA> \n#>     LSAD    MTFCC FUNCSTAT    ALAND   AWATER INTPTLAT INTPTLON \n#>     <NA>     <NA>     <NA>     <NA>     <NA>     <NA>     <NA> \n#> Levels: constant aggregate identity\n#> \n#> $tigris\n#> [1] \"state\"\n```\n:::\n\n\n## Things to remember about `sf` and `sfc` objects\n\n-   a `sf` object is a data frame with a `sfc` list-column\n-   a `sf` object has a `sf_column` attribute (it isn't always named geometry---use `attributes()` to take a look)\n-   `sf` and `sfc` objects use a coordinate reference system\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\nst_crs(us_states)\n#> Coordinate Reference System:\n#>   User input: NAD83 \n#>   wkt:\n#> GEOGCRS[\"NAD83\",\n#>     DATUM[\"North American Datum 1983\",\n#>         ELLIPSOID[\"GRS 1980\",6378137,298.257222101,\n#>             LENGTHUNIT[\"metre\",1]]],\n#>     PRIMEM[\"Greenwich\",0,\n#>         ANGLEUNIT[\"degree\",0.0174532925199433]],\n#>     CS[ellipsoidal,2],\n#>         AXIS[\"latitude\",north,\n#>             ORDER[1],\n#>             ANGLEUNIT[\"degree\",0.0174532925199433]],\n#>         AXIS[\"longitude\",east,\n#>             ORDER[2],\n#>             ANGLEUNIT[\"degree\",0.0174532925199433]],\n#>     ID[\"EPSG\",4269]]\n\nst_crs(us_states$geometry)\n#> Coordinate Reference System:\n#>   User input: NAD83 \n#>   wkt:\n#> GEOGCRS[\"NAD83\",\n#>     DATUM[\"North American Datum 1983\",\n#>         ELLIPSOID[\"GRS 1980\",6378137,298.257222101,\n#>             LENGTHUNIT[\"metre\",1]]],\n#>     PRIMEM[\"Greenwich\",0,\n#>         ANGLEUNIT[\"degree\",0.0174532925199433]],\n#>     CS[ellipsoidal,2],\n#>         AXIS[\"latitude\",north,\n#>             ORDER[1],\n#>             ANGLEUNIT[\"degree\",0.0174532925199433]],\n#>         AXIS[\"longitude\",east,\n#>             ORDER[2],\n#>             ANGLEUNIT[\"degree\",0.0174532925199433]],\n#>     ID[\"EPSG\",4269]]\n```\n:::\n\n\n## Things to remember about `sf` and `sfc` objects\n\n-   a `sf` object is a data frame with a `sfc` list-column\n-   a `sf` object has a `sf_column` attribute (it isn't always named geometry---use `attributes()` to take a look)\n-   `sf` and `sfc` objects use a coordinate reference system\n-   working with `sf` objects is *slower* than working with data frames---so drop the geometry if you don't need it\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\nst_drop_geometry(us_states)\n#>    REGION DIVISION STATEFP  STATENS GEOID     GEOIDFQ STUSPS\n#> 1       3        5      54 01779805    54 0400000US54     WV\n#> 2       3        5      12 00294478    12 0400000US12     FL\n#> 3       2        3      17 01779784    17 0400000US17     IL\n#> 4       2        4      27 00662849    27 0400000US27     MN\n#> 5       3        5      24 01714934    24 0400000US24     MD\n#> 6       1        1      44 01219835    44 0400000US44     RI\n#> 7       4        8      16 01779783    16 0400000US16     ID\n#> 8       1        1      33 01779794    33 0400000US33     NH\n#> 9       3        5      37 01027616    37 0400000US37     NC\n#> 10      1        1      50 01779802    50 0400000US50     VT\n#> 11      1        1      09 01779780    09 0400000US09     CT\n#> 12      3        5      10 01779781    10 0400000US10     DE\n#> 13      4        8      35 00897535    35 0400000US35     NM\n#> 14      4        9      06 01779778    06 0400000US06     CA\n#> 15      1        2      34 01779795    34 0400000US34     NJ\n#> 16      2        3      55 01779806    55 0400000US55     WI\n#> 17      4        9      41 01155107    41 0400000US41     OR\n#> 18      2        4      31 01779792    31 0400000US31     NE\n#> 19      1        2      42 01779798    42 0400000US42     PA\n#> 20      4        9      53 01779804    53 0400000US53     WA\n#> 21      3        7      22 01629543    22 0400000US22     LA\n#> 22      3        5      13 01705317    13 0400000US13     GA\n#> 23      3        6      01 01779775    01 0400000US01     AL\n#> 24      4        8      49 01455989    49 0400000US49     UT\n#> 25      2        3      39 01085497    39 0400000US39     OH\n#> 26      3        7      48 01779801    48 0400000US48     TX\n#> 27      4        8      08 01779779    08 0400000US08     CO\n#> 28      3        5      45 01779799    45 0400000US45     SC\n#> 29      3        7      40 01102857    40 0400000US40     OK\n#> 30      3        6      47 01325873    47 0400000US47     TN\n#> 31      4        8      56 01779807    56 0400000US56     WY\n#> 32      4        9      15 01779782    15 0400000US15     HI\n#> 33      2        4      38 01779797    38 0400000US38     ND\n#> 34      3        6      21 01779786    21 0400000US21     KY\n#> 35      9        0      78 01802710    78 0400000US78     VI\n#> 36      9        0      69 01779809    69 0400000US69     MP\n#> 37      9        0      66 01802705    66 0400000US66     GU\n#> 38      1        1      23 01779787    23 0400000US23     ME\n#> 39      1        2      36 01779796    36 0400000US36     NY\n#> 40      4        8      32 01779793    32 0400000US32     NV\n#> 41      4        9      02 01785533    02 0400000US02     AK\n#> 42      9        0      60 01802701    60 0400000US60     AS\n#> 43      2        3      26 01779789    26 0400000US26     MI\n#> 44      3        7      05 00068085    05 0400000US05     AR\n#> 45      3        6      28 01779790    28 0400000US28     MS\n#> 46      2        4      29 01779791    29 0400000US29     MO\n#> 47      4        8      30 00767982    30 0400000US30     MT\n#> 48      2        4      20 00481813    20 0400000US20     KS\n#> 49      2        3      18 00448508    18 0400000US18     IN\n#> 50      9        0      72 01779808    72 0400000US72     PR\n#> 51      2        4      46 01785534    46 0400000US46     SD\n#> 52      1        1      25 00606926    25 0400000US25     MA\n#> 53      3        5      51 01779803    51 0400000US51     VA\n#> 54      3        5      11 01702382    11 0400000US11     DC\n#> 55      2        4      19 01779785    19 0400000US19     IA\n#> 56      4        8      04 01779777    04 0400000US04     AZ\n#>                                            NAME LSAD MTFCC FUNCSTAT\n#> 1                                 West Virginia   00 G4000        A\n#> 2                                       Florida   00 G4000        A\n#> 3                                      Illinois   00 G4000        A\n#> 4                                     Minnesota   00 G4000        A\n#> 5                                      Maryland   00 G4000        A\n#> 6                                  Rhode Island   00 G4000        A\n#> 7                                         Idaho   00 G4000        A\n#> 8                                 New Hampshire   00 G4000        A\n#> 9                                North Carolina   00 G4000        A\n#> 10                                      Vermont   00 G4000        A\n#> 11                                  Connecticut   00 G4000        A\n#> 12                                     Delaware   00 G4000        A\n#> 13                                   New Mexico   00 G4000        A\n#> 14                                   California   00 G4000        A\n#> 15                                   New Jersey   00 G4000        A\n#> 16                                    Wisconsin   00 G4000        A\n#> 17                                       Oregon   00 G4000        A\n#> 18                                     Nebraska   00 G4000        A\n#> 19                                 Pennsylvania   00 G4000        A\n#> 20                                   Washington   00 G4000        A\n#> 21                                    Louisiana   00 G4000        A\n#> 22                                      Georgia   00 G4000        A\n#> 23                                      Alabama   00 G4000        A\n#> 24                                         Utah   00 G4000        A\n#> 25                                         Ohio   00 G4000        A\n#> 26                                        Texas   00 G4000        A\n#> 27                                     Colorado   00 G4000        A\n#> 28                               South Carolina   00 G4000        A\n#> 29                                     Oklahoma   00 G4000        A\n#> 30                                    Tennessee   00 G4000        A\n#> 31                                      Wyoming   00 G4000        A\n#> 32                                       Hawaii   00 G4000        A\n#> 33                                 North Dakota   00 G4000        A\n#> 34                                     Kentucky   00 G4000        A\n#> 35                 United States Virgin Islands   00 G4000        A\n#> 36 Commonwealth of the Northern Mariana Islands   00 G4000        A\n#> 37                                         Guam   00 G4000        A\n#> 38                                        Maine   00 G4000        A\n#> 39                                     New York   00 G4000        A\n#> 40                                       Nevada   00 G4000        A\n#> 41                                       Alaska   00 G4000        A\n#> 42                               American Samoa   00 G4000        A\n#> 43                                     Michigan   00 G4000        A\n#> 44                                     Arkansas   00 G4000        A\n#> 45                                  Mississippi   00 G4000        A\n#> 46                                     Missouri   00 G4000        A\n#> 47                                      Montana   00 G4000        A\n#> 48                                       Kansas   00 G4000        A\n#> 49                                      Indiana   00 G4000        A\n#> 50                                  Puerto Rico   00 G4000        A\n#> 51                                 South Dakota   00 G4000        A\n#> 52                                Massachusetts   00 G4000        A\n#> 53                                     Virginia   00 G4000        A\n#> 54                         District of Columbia   00 G4000        A\n#> 55                                         Iowa   00 G4000        A\n#> 56                                      Arizona   00 G4000        A\n#>           ALAND       AWATER    INTPTLAT     INTPTLON\n#> 1  6.226651e+10    488918898 +38.6472854 -080.6183274\n#> 2  1.389654e+11  45968913048 +28.3989775 -082.5143005\n#> 3  1.437782e+11   6216848695 +40.1028754 -089.1526108\n#> 4  2.062448e+11  18937236061 +46.3159573 -094.1996043\n#> 5  2.515122e+10   6979843236 +38.9466584 -076.6744939\n#> 6  2.677769e+09   1323681453 +41.5964850 -071.5264901\n#> 7  2.140505e+11   2390996667 +44.3484222 -114.5588538\n#> 8  2.319021e+10   1025871482 +43.6727945 -071.5841886\n#> 9  1.259360e+11  13453455061 +35.5397100 -079.1308636\n#> 10 2.387259e+10   1030642813 +44.0589536 -072.6710173\n#> 11 1.254200e+10   1816115183 +41.5798637 -072.7466572\n#> 12 5.046692e+09   1399219008 +38.9985661 -075.4416440\n#> 13 3.141985e+11    726531289 +34.4346843 -106.1316181\n#> 14 4.036734e+11  20291632828 +37.1551773 -119.5434183\n#> 15 1.904923e+10   3533374440 +40.1072744 -074.6652012\n#> 16 1.402946e+11  29341156602 +44.6309071 -089.7093916\n#> 17 2.486304e+11   6168761370 +43.9717125 -120.6229578\n#> 18 1.989500e+11   1378956981 +41.5433053 -099.8118646\n#> 19 1.158815e+11   3397613881 +40.9046042 -077.8275233\n#> 20 1.721188e+11  12549101417 +47.4073238 -120.5757999\n#> 21 1.119209e+11  23730773357 +30.7083190 -091.6046207\n#> 22 1.494858e+11   4419221858 +32.6295789 -083.4235109\n#> 23 1.311856e+11   4581813708 +32.7395785 -086.8434469\n#> 24 2.139219e+11   5963163952 +39.3349925 -111.6563326\n#> 25 1.058241e+11  10274225585 +40.4149297 -082.7119975\n#> 26 6.766567e+11  19011620342 +31.4347032 -099.2818238\n#> 27 2.684190e+11   1185541418 +38.9937669 -105.5087122\n#> 28 7.786566e+10   5074780894 +33.8741776 -080.8542639\n#> 29 1.776646e+11   3373250292 +35.5900815 -097.4867789\n#> 30 1.067705e+11   2345359962 +35.8584600 -086.3496339\n#> 31 2.514582e+11   1868025485 +42.9896591 -107.5443922\n#> 32 1.663442e+10  11777375352 +19.8281671 -155.4950421\n#> 33 1.786943e+11   4414770689 +47.4421740 -100.4608258\n#> 34 1.022668e+11   2384136185 +37.5336844 -085.2929801\n#> 35 3.480219e+08   1550236187 +18.3392359 -064.9500433\n#> 36 4.722925e+08   4644252458 +15.0010865 +145.6181702\n#> 37 5.435558e+08    934337453 +13.4382885 +144.7729494\n#> 38 7.988840e+10  11745065493 +45.4092843 -068.6666160\n#> 39 1.220492e+11  19256755462 +42.9133974 -075.5962723\n#> 40 2.845370e+11   1839880833 +39.3310928 -116.6151469\n#> 41 1.479509e+12 244710526650 +63.3473560 -152.8397334\n#> 42 1.977591e+08   1307243751 -14.2671590 -170.6682674\n#> 43 1.466217e+11 103864424446 +44.8441768 -085.6604907\n#> 44 1.346585e+11   3122715710 +34.8955256 -092.4446262\n#> 45 1.215341e+11   3914302814 +32.6864714 -089.6561377\n#> 46 1.780524e+11   2487375487 +38.3507500 -092.4567826\n#> 47 3.769734e+11   3866958878 +47.0511770 -109.6348174\n#> 48 2.117538e+11   1345663763 +38.4985464 -098.3834298\n#> 49 9.278669e+10   1543916881 +39.9013136 -086.2919129\n#> 50 8.869520e+09   4921758891 +18.2176480 -066.4107992\n#> 51 1.963417e+11   3387563375 +44.4467957 -100.2381762\n#> 52 2.020440e+10   7130649971 +42.1565196 -071.4895915\n#> 53 1.022563e+11   8529908321 +37.5222512 -078.6681938\n#> 54 1.583162e+08     18709785 +38.9042474 -077.0165167\n#> 55 1.446603e+11   1085343719 +42.0700243 -093.4933473\n#> 56 2.943661e+11    853991999 +34.2039362 -111.6063449\n```\n:::\n\n\n## Things to remember about coordinate reference systems\n\n-   objects *must* share the same coordinate reference system if you are using them together\n-   coordinate reference systems are stored as attributes for `sfc` and `sf` objects (`sfg` objects don't have a CRS)\n-   coordinate reference systems have *units*\n-   geographic and projected coordinate reference systems are *not* the same\n-   coordinate reference systems can be missing and they can be wrong\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# bad: assigning a CRS that doesn't match the geometry\nst_crs(us_states) <- 3857\n\n# good: using st_transform to convert the geometry to a new CRS\nst_transform(us_states, crs = 3857)\n```\n:::\n\n\n------------------------------------------------------------------------\n\nGet the objects into the same CRS before we continue:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states <- st_transform(us_states, crs = 3857)\n\nus_highways <- st_transform(us_highways, crs = 3857)\n```\n:::\n\n\n## Things to think about\n\n-   `sf` objects are *not* the only way to represent spatial data in R\n\n-   If you are working with more than one `sf` or `sfc`, the objects must use the *same* coordinate reference system to use them together.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# state\n```\n:::\n\n\n## What is an \"attribute\" in GIS?\n\nWithin a GIS desktop application, an **attribute** may be known as a **field**.\n\nWhen we talk about tidy data frames, an attribute is equivalent to a **variable** which is represented as a **column** in a data frame.\n\n::: notes\nhttps://support.esri.com/en-us/gis-dictionary/attribute\n\n-   \\[data models\\] Nonspatial information about a geographic feature in a GIS, usually stored in a table and linked to the feature by a unique identifier. For example, attributes of a river might include its name, length, and sediment load at a gauging station.\n-   \\[data models\\] In raster datasets, information associated with each unique value of a raster cell.\n-   \\[graphics (map display)\\] Information that specifies how features are displayed and labeled on a map; for example, the graphic attributes of a river might include line thickness, line length, color, and font for labeling.\n:::\n\n------------------------------------------------------------------------\n\n**But!** Feature geometry is also stored as a column.\n\nA single `sfc` object (or list-column) can contain more than one feature (shapefiles can't do this BTW!) using MULTIPOINT, MULTILINESTRING, MULTIPOLYGON, or GEOMETRYCOLLECTION geometry types.\n\n------------------------------------------------------------------------\n\n**And!** Objects in R can also have attributes and these are *not* the same thing as attributes for spatial data. Try not to get them mixed up.\n\n## What is an attribute?\n\nSo (to recap) an *attribute* in GIS can also be called a...\n\n-   ...**field** in a desktop GIS application\n-   ...**variable** in tidy data\n-   ...**column** in a data frame\n\n## What types of attributes exist?\n\nAttributes are \"properties of features ('things') that do not describe the feature's geometry\".\n\nHere are the attributes for `us_states`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(st_drop_geometry(us_states))\n#> Rows: 56\n#> Columns: 15\n#> $ REGION   <chr> \"3\", \"3\", \"2\", \"2\", \"3\", \"1\", \"4\", \"1\", \"3\", \"1\", \"1\", \"3\"…\n#> $ DIVISION <chr> \"5\", \"5\", \"3\", \"4\", \"5\", \"1\", \"8\", \"1\", \"5\", \"1\", \"1\", \"5\"…\n#> $ STATEFP  <chr> \"54\", \"12\", \"17\", \"27\", \"24\", \"44\", \"16\", \"33\", \"37\", \"50\"…\n#> $ STATENS  <chr> \"01779805\", \"00294478\", \"01779784\", \"00662849\", \"01714934\"…\n#> $ GEOID    <chr> \"54\", \"12\", \"17\", \"27\", \"24\", \"44\", \"16\", \"33\", \"37\", \"50\"…\n#> $ GEOIDFQ  <chr> \"0400000US54\", \"0400000US12\", \"0400000US17\", \"0400000US27\"…\n#> $ STUSPS   <chr> \"WV\", \"FL\", \"IL\", \"MN\", \"MD\", \"RI\", \"ID\", \"NH\", \"NC\", \"VT\"…\n#> $ NAME     <chr> \"West Virginia\", \"Florida\", \"Illinois\", \"Minnesota\", \"Mary…\n#> $ LSAD     <chr> \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\"…\n#> $ MTFCC    <chr> \"G4000\", \"G4000\", \"G4000\", \"G4000\", \"G4000\", \"G4000\", \"G40…\n#> $ FUNCSTAT <chr> \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\"…\n#> $ ALAND    <dbl> 62266513826, 138965379385, 143778206717, 206244791203, 251…\n#> $ AWATER   <dbl> 488918898, 45968913048, 6216848695, 18937236061, 697984323…\n#> $ INTPTLAT <chr> \"+38.6472854\", \"+28.3989775\", \"+40.1028754\", \"+46.3159573\"…\n#> $ INTPTLON <chr> \"-080.6183274\", \"-082.5143005\", \"-089.1526108\", \"-094.1996…\n```\n:::\n\n\n::: notes\nFIXME: Add missing source for quoted text on this slide\n:::\n\n------------------------------------------------------------------------\n\nAttributes can have:\n\n-   **point support:** the value applies to every point *individually*, or\n-   **block support:** the value is a summary for *all* points in the geometry\n\n------------------------------------------------------------------------\n\nThe relationship between attributes and geometry can be described as:\n\n-   **constant:** the value is valid everywhere in or over the geometry\n-   **aggregate:** the value is associated with the entire geometry\n\n------------------------------------------------------------------------\n\nWhat is an example of an attribute with a constant relationship?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(us_states)\n#> Rows: 56\n#> Columns: 16\n#> $ REGION   <chr> \"3\", \"3\", \"2\", \"2\", \"3\", \"1\", \"4\", \"1\", \"3\", \"1\", \"1\", \"3\"…\n#> $ DIVISION <chr> \"5\", \"5\", \"3\", \"4\", \"5\", \"1\", \"8\", \"1\", \"5\", \"1\", \"1\", \"5\"…\n#> $ STATEFP  <chr> \"54\", \"12\", \"17\", \"27\", \"24\", \"44\", \"16\", \"33\", \"37\", \"50\"…\n#> $ STATENS  <chr> \"01779805\", \"00294478\", \"01779784\", \"00662849\", \"01714934\"…\n#> $ GEOID    <chr> \"54\", \"12\", \"17\", \"27\", \"24\", \"44\", \"16\", \"33\", \"37\", \"50\"…\n#> $ GEOIDFQ  <chr> \"0400000US54\", \"0400000US12\", \"0400000US17\", \"0400000US27\"…\n#> $ STUSPS   <chr> \"WV\", \"FL\", \"IL\", \"MN\", \"MD\", \"RI\", \"ID\", \"NH\", \"NC\", \"VT\"…\n#> $ NAME     <chr> \"West Virginia\", \"Florida\", \"Illinois\", \"Minnesota\", \"Mary…\n#> $ LSAD     <chr> \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\"…\n#> $ MTFCC    <chr> \"G4000\", \"G4000\", \"G4000\", \"G4000\", \"G4000\", \"G4000\", \"G40…\n#> $ FUNCSTAT <chr> \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\"…\n#> $ ALAND    <dbl> 62266513826, 138965379385, 143778206717, 206244791203, 251…\n#> $ AWATER   <dbl> 488918898, 45968913048, 6216848695, 18937236061, 697984323…\n#> $ INTPTLAT <chr> \"+38.6472854\", \"+28.3989775\", \"+40.1028754\", \"+46.3159573\"…\n#> $ INTPTLON <chr> \"-080.6183274\", \"-082.5143005\", \"-089.1526108\", \"-094.1996…\n#> $ geometry <MULTIPOLYGON [m]> MULTIPOLYGON (((-8655578 47..., MULTIPOLYGON …\n```\n:::\n\n\n::: notes\nFIXME: Turn this into a quiz\n\n-   NAME, REGION, or DIVISION: Yes - every part of a state can still use the same state name\n-   ALAND: No - this is an aggregate value\n-   INTPTLAT: No - this is a summary value\n:::\n\n------------------------------------------------------------------------\n\nWhat is an example with an aggregate relationship?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(us_states)\n#> Rows: 56\n#> Columns: 16\n#> $ REGION   <chr> \"3\", \"3\", \"2\", \"2\", \"3\", \"1\", \"4\", \"1\", \"3\", \"1\", \"1\", \"3\"…\n#> $ DIVISION <chr> \"5\", \"5\", \"3\", \"4\", \"5\", \"1\", \"8\", \"1\", \"5\", \"1\", \"1\", \"5\"…\n#> $ STATEFP  <chr> \"54\", \"12\", \"17\", \"27\", \"24\", \"44\", \"16\", \"33\", \"37\", \"50\"…\n#> $ STATENS  <chr> \"01779805\", \"00294478\", \"01779784\", \"00662849\", \"01714934\"…\n#> $ GEOID    <chr> \"54\", \"12\", \"17\", \"27\", \"24\", \"44\", \"16\", \"33\", \"37\", \"50\"…\n#> $ GEOIDFQ  <chr> \"0400000US54\", \"0400000US12\", \"0400000US17\", \"0400000US27\"…\n#> $ STUSPS   <chr> \"WV\", \"FL\", \"IL\", \"MN\", \"MD\", \"RI\", \"ID\", \"NH\", \"NC\", \"VT\"…\n#> $ NAME     <chr> \"West Virginia\", \"Florida\", \"Illinois\", \"Minnesota\", \"Mary…\n#> $ LSAD     <chr> \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\", \"00\"…\n#> $ MTFCC    <chr> \"G4000\", \"G4000\", \"G4000\", \"G4000\", \"G4000\", \"G4000\", \"G40…\n#> $ FUNCSTAT <chr> \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\", \"A\"…\n#> $ ALAND    <dbl> 62266513826, 138965379385, 143778206717, 206244791203, 251…\n#> $ AWATER   <dbl> 488918898, 45968913048, 6216848695, 18937236061, 697984323…\n#> $ INTPTLAT <chr> \"+38.6472854\", \"+28.3989775\", \"+40.1028754\", \"+46.3159573\"…\n#> $ INTPTLON <chr> \"-080.6183274\", \"-082.5143005\", \"-089.1526108\", \"-094.1996…\n#> $ geometry <MULTIPOLYGON [m]> MULTIPOLYGON (((-8655578 47..., MULTIPOLYGON …\n```\n:::\n\n\n::: notes\n-   NAME, REGION, or DIVISION: Yes - every part of a state can still use the same state name\n-   ALAND or AWATER: Yes - this is an aggregate value - if the shape of the state changed, the land area would change\n-   INTPTLAT or INTPTLON: Yes - this is a summary value - if the shape of the state changed, the interior latitude/longitude point would change\n\nIllustrates the point: \"A typical property of such variables is that associated geometries come for instance from legislation, observation devices or analysis choices, but not intrinsically from the observed variable.\"\n:::\n\n------------------------------------------------------------------------\n\nAttributes can be:\n\n-   extensive: corresponding to amounts, associated with a physical size (length, area, volume, counts of items)\n-   intensive: FIXME: fill in missing definition.\n\n## What is an \"attribute domain\"?\n\n::: notes\n-   \\[data structures\\] In a geodatabase, a mechanism for enforcing data integrity. Attribute domains define what values are allowed in a field in a feature class or nonspatial attribute table. If the features or nonspatial objects have been grouped into subtypes, different attribute domains can be assigned to each of the subtypes.\n:::\n\n## What are we working with?\n\nWhen we do data analysis using `{dplyr}`, there are three types of functions we use most often:\n\n-   Boolean operators or predicates\n-   Window or vector functions\n-   Summary or analysis functions\n\nThere are similar groups of functions in `{sf}`:\n\n## Predicate functions for geometries with `{sf}`\n\n`{sf}` includes \"vectorized\" logical operators or tests that work with a geometry list (`sf` or `sfc`) or a single geometry (`sfg`) including:\n\n-   `st_is`\n-   `st_is_valid`\n-   `st_is_empty`\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\nst_is(us_states, \"POLYGON\")\n#>  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n#> [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n#> [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n#> [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n#> [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n\nst_is(us_states, \"MULTIPOLYGON\")\n#>  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n#> [15] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n#> [29] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n#> [43] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n```\n:::\n\n\n## Predicate functions for geometries with `{sf}`\n\n`{sf}` also includes more than a dozen predicate functions for working with *pairs* of simple geometries including:\n\n-   `st_intersects`\n-   `st_disjoint`\n-   `st_contains`\n-   `st_covers`\n-   `st_is_within_distance`\n\n## Using predicate functions for spatial joins and filters\n\n`st_filter()` and `st_join()` are two functions that rely on these predicate functions to work.\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmaryland <- filter(us_states, NAME == \"Maryland\")\n\nst_filter(us_highways, maryland)\n#> Simple feature collection with 466 features and 4 fields\n#> Geometry type: LINESTRING\n#> Dimension:     XY\n#> Bounding box:  xmin: -8881626 ymin: 4621400 xmax: -8367444 ymax: 4897471\n#> Projected CRS: WGS 84 / Pseudo-Mercator\n#> First 10 features:\n#>         LINEARID      FULLNAME RTTYP MTFCC                       geometry\n#> 1  1104258795090 Salisbury Byp     M S1100 LINESTRING (-8416214 463670...\n#> 2  1103075320064 Salisbury Byp     M S1100 LINESTRING (-8414039 463644...\n#> 3  1104258795072 Salisbury Byp     M S1100 LINESTRING (-8417144 463654...\n#> 4  1104258845568 Salisbury Byp     M S1100 LINESTRING (-8413964 463644...\n#> 5   110191599447 Salisbury Byp     M S1100 LINESTRING (-8409248 463421...\n#> 6   110191599448 Salisbury Byp     M S1100 LINESTRING (-8419516 462217...\n#> 7  1102149806067 Salisbury Byp     M S1100 LINESTRING (-8412863 463617...\n#> 8  1102149813008 Salisbury Byp     M S1100 LINESTRING (-8412725 463596...\n#> 9  1102149806121 Salisbury Byp     M S1100 LINESTRING (-8412973 463624...\n#> 10 1102166635559 Salisbury Byp     M S1100 LINESTRING (-8412583 463576...\n```\n:::\n\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\nst_filter(us_states, maryland, .predicate = st_disjoint)\n#> Simple feature collection with 50 features and 15 fields\n#> Geometry type: MULTIPOLYGON\n#> Dimension:     XY\n#> Bounding box:  xmin: -19951910 ymin: -1643353 xmax: 20021890 ymax: 11554350\n#> Projected CRS: WGS 84 / Pseudo-Mercator\n#> First 10 features:\n#>    REGION DIVISION STATEFP  STATENS GEOID     GEOIDFQ STUSPS           NAME\n#> 1       3        5      12 00294478    12 0400000US12     FL        Florida\n#> 2       2        3      17 01779784    17 0400000US17     IL       Illinois\n#> 3       2        4      27 00662849    27 0400000US27     MN      Minnesota\n#> 4       1        1      44 01219835    44 0400000US44     RI   Rhode Island\n#> 5       4        8      16 01779783    16 0400000US16     ID          Idaho\n#> 6       1        1      33 01779794    33 0400000US33     NH  New Hampshire\n#> 7       3        5      37 01027616    37 0400000US37     NC North Carolina\n#> 8       1        1      50 01779802    50 0400000US50     VT        Vermont\n#> 9       1        1      09 01779780    09 0400000US09     CT    Connecticut\n#> 10      4        8      35 00897535    35 0400000US35     NM     New Mexico\n#>    LSAD MTFCC FUNCSTAT        ALAND      AWATER    INTPTLAT     INTPTLON\n#> 1    00 G4000        A 138965379385 45968913048 +28.3989775 -082.5143005\n#> 2    00 G4000        A 143778206717  6216848695 +40.1028754 -089.1526108\n#> 3    00 G4000        A 206244791203 18937236061 +46.3159573 -094.1996043\n#> 4    00 G4000        A   2677768885  1323681453 +41.5964850 -071.5264901\n#> 5    00 G4000        A 214050504522  2390996667 +44.3484222 -114.5588538\n#> 6    00 G4000        A  23190211616  1025871482 +43.6727945 -071.5841886\n#> 7    00 G4000        A 125935965771 13453455061 +35.5397100 -079.1308636\n#> 8    00 G4000        A  23872594714  1030642813 +44.0589536 -072.6710173\n#> 9    00 G4000        A  12541999507  1816115183 +41.5798637 -072.7466572\n#> 10   00 G4000        A 314198519809   726531289 +34.4346843 -106.1316181\n#>                          geometry\n#> 1  MULTIPOLYGON (((-9251622 28...\n#> 2  MULTIPOLYGON (((-9784141 46...\n#> 3  MULTIPOLYGON (((-10610964 6...\n#> 4  MULTIPOLYGON (((-7979248 50...\n#> 5  MULTIPOLYGON (((-12952962 6...\n#> 6  MULTIPOLYGON (((-7885747 53...\n#> 7  MULTIPOLYGON (((-8671763 43...\n#> 8  MULTIPOLYGON (((-8019664 54...\n#> 9  MULTIPOLYGON (((-8073769 50...\n#> 10 MULTIPOLYGON (((-11473113 3...\n```\n:::\n\n\n## Creating new variables with geometry\n\n-   Measuring feature geometries\n-   Comparing feature geometries\n-   Joining data based on feature geometries\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmaryland <- filter(us_states, NAME == \"Maryland\")\n```\n:::\n\n\n## Measuring geometries with `{sf}`\n\n`{sf}` includes a few different functions for measuring geometries:\n\n-   `st_area()` (only works with POLYGON and MULTIPOLYGON geometries)\n-   `st_length()` (only wrks with LINESTRING and MULTILINSTRING geometries)\n-   `st_distance()` (requires a pair of objects)\n\n## Measuring geometries with `{sf}`\n\nAll of these functions are *vectorized* meaning that they can operate independently on each feature in a `sf` or `sfc` object.\n\nThey support both `sf` inputs (data frames) *and* `sfc` inputs (lists)---but they always return a vector:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nst_area(maryland)\n#> 53204014051 [m^2]\n\nst_area(maryland$geometry)\n#> 53204014051 [m^2]\n```\n:::\n\n\n## Measuring geometries with `{sf}`\n\nBut, remember, `dplyr::mutate()` is designed to work with vectorized functions so you can use a measurement function inside `mutate()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmaryland |>\n  mutate(\n    area = st_area(geometry)\n  )\n#> Simple feature collection with 1 feature and 16 fields\n#> Geometry type: MULTIPOLYGON\n#> Dimension:     XY\n#> Bounding box:  xmin: -8848525 ymin: 4563419 xmax: -8347435 ymax: 4825776\n#> Projected CRS: WGS 84 / Pseudo-Mercator\n#>   REGION DIVISION STATEFP  STATENS GEOID     GEOIDFQ STUSPS     NAME LSAD\n#> 1      3        5      24 01714934    24 0400000US24     MD Maryland   00\n#>   MTFCC FUNCSTAT       ALAND     AWATER    INTPTLAT     INTPTLON\n#> 1 G4000        A 25151223822 6979843236 +38.9466584 -076.6744939\n#>                         geometry              area\n#> 1 MULTIPOLYGON (((-8433120 47... 53204014051 [m^2]\n```\n:::\n\n\n## Measuring geometries with `{sf}`\n\nYou can even work with multiple geometries using this same approach:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states |>\n  mutate(\n    area = st_area(geometry),\n    distance_to_maryland = st_distance(geometry, maryland)\n  )\n#> Simple feature collection with 56 features and 17 fields\n#> Geometry type: MULTIPOLYGON\n#> Dimension:     XY\n#> Bounding box:  xmin: -19951910 ymin: -1643353 xmax: 20021890 ymax: 11554350\n#> Projected CRS: WGS 84 / Pseudo-Mercator\n#> First 10 features:\n#>    REGION DIVISION STATEFP  STATENS GEOID     GEOIDFQ STUSPS           NAME\n#> 1       3        5      54 01779805    54 0400000US54     WV  West Virginia\n#> 2       3        5      12 00294478    12 0400000US12     FL        Florida\n#> 3       2        3      17 01779784    17 0400000US17     IL       Illinois\n#> 4       2        4      27 00662849    27 0400000US27     MN      Minnesota\n#> 5       3        5      24 01714934    24 0400000US24     MD       Maryland\n#> 6       1        1      44 01219835    44 0400000US44     RI   Rhode Island\n#> 7       4        8      16 01779783    16 0400000US16     ID          Idaho\n#> 8       1        1      33 01779794    33 0400000US33     NH  New Hampshire\n#> 9       3        5      37 01027616    37 0400000US37     NC North Carolina\n#> 10      1        1      50 01779802    50 0400000US50     VT        Vermont\n#>    LSAD MTFCC FUNCSTAT        ALAND      AWATER    INTPTLAT     INTPTLON\n#> 1    00 G4000        A  62266513826   488918898 +38.6472854 -080.6183274\n#> 2    00 G4000        A 138965379385 45968913048 +28.3989775 -082.5143005\n#> 3    00 G4000        A 143778206717  6216848695 +40.1028754 -089.1526108\n#> 4    00 G4000        A 206244791203 18937236061 +46.3159573 -094.1996043\n#> 5    00 G4000        A  25151223822  6979843236 +38.9466584 -076.6744939\n#> 6    00 G4000        A   2677768885  1323681453 +41.5964850 -071.5264901\n#> 7    00 G4000        A 214050504522  2390996667 +44.3484222 -114.5588538\n#> 8    00 G4000        A  23190211616  1025871482 +43.6727945 -071.5841886\n#> 9    00 G4000        A 125935965771 13453455061 +35.5397100 -079.1308636\n#> 10   00 G4000        A  23872594714  1030642813 +44.0589536 -072.6710173\n#>                          geometry               area distance_to_maryland\n#> 1  MULTIPOLYGON (((-8655578 47... 103045820058 [m^2]              0.0 [m]\n#> 2  MULTIPOLYGON (((-9251622 28... 240290408316 [m^2]        1122737.0 [m]\n#> 3  MULTIPOLYGON (((-9784141 46... 257089838407 [m^2]         893538.7 [m]\n#> 4  MULTIPOLYGON (((-10610964 6... 473223871919 [m^2]        1423100.6 [m]\n#> 5  MULTIPOLYGON (((-8433120 47...  53204014051 [m^2]              0.0 [m]\n#> 6  MULTIPOLYGON (((-7979248 50...   7160497121 [m^2]         490274.7 [m]\n#> 7  MULTIPOLYGON (((-12952962 6... 424675068385 [m^2]        3530363.1 [m]\n#> 8  MULTIPOLYGON (((-7885747 53...  46326397472 [m^2]         579065.3 [m]\n#> 9  MULTIPOLYGON (((-8671763 43... 210941928127 [m^2]         186785.1 [m]\n#> 10 MULTIPOLYGON (((-8019664 54...  48271748241 [m^2]         527897.6 [m]\n```\n:::\n\n\nThis works to aggregate features by division:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states |>\n  group_by(DIVISION) |>\n  summarise(\n    n_states = n_distinct(NAME)\n  )\n#> Simple feature collection with 10 features and 2 fields\n#> Geometry type: GEOMETRY\n#> Dimension:     XY\n#> Bounding box:  xmin: -19951910 ymin: -1643353 xmax: 20021890 ymax: 11554350\n#> Projected CRS: WGS 84 / Pseudo-Mercator\n#> # A tibble: 10 × 3\n#>   DIVISION n_states                                                  geometry\n#>   <chr>       <int>                                            <GEOMETRY [m]>\n#> 1 0               5 MULTIPOLYGON (((-18726019 -1633065, -18725998 -1633025, …\n#> 2 1               6 MULTIPOLYGON (((-7978692 5038758, -7978581 5039616, -797…\n#> 3 2               3 POLYGON ((-8290777 4763109, -8291389 4762454, -8291849 4…\n#> 4 3               5 POLYGON ((-9799335 4551032, -9799438 4550965, -9799539 4…\n#> 5 4               7 POLYGON ((-10176807 4921011, -10176847 4920961, -1017704…\n#> 6 5               9 MULTIPOLYGON (((-9250560 2835330, -9249947 2836819, -924…\n#> # ℹ 4 more rows\n```\n:::\n\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states |>\n  group_by(DIVISION) |>\n  summarise(\n    n_states = n_distinct(NAME)\n  ) |>\n  ggplot() +\n  geom_sf(aes(fill = DIVISION)) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](spatial-data-attributes_files/figure-revealjs/unnamed-chunk-24-1.png){width=576}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\nThis doesn't entirely work (yet):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states |>\n  group_by(DIVISION) |>\n  summarise(\n    n_states = n_distinct(NAME) # ,\n    # .by = DIVISION\n  )\n#> Simple feature collection with 10 features and 2 fields\n#> Geometry type: GEOMETRY\n#> Dimension:     XY\n#> Bounding box:  xmin: -19951910 ymin: -1643353 xmax: 20021890 ymax: 11554350\n#> Projected CRS: WGS 84 / Pseudo-Mercator\n#> # A tibble: 10 × 3\n#>   DIVISION n_states                                                  geometry\n#>   <chr>       <int>                                            <GEOMETRY [m]>\n#> 1 0               5 MULTIPOLYGON (((-18726019 -1633065, -18725998 -1633025, …\n#> 2 1               6 MULTIPOLYGON (((-7978692 5038758, -7978581 5039616, -797…\n#> 3 2               3 POLYGON ((-8290777 4763109, -8291389 4762454, -8291849 4…\n#> 4 3               5 POLYGON ((-9799335 4551032, -9799438 4550965, -9799539 4…\n#> 5 4               7 POLYGON ((-10176807 4921011, -10176847 4920961, -1017704…\n#> 6 5               9 MULTIPOLYGON (((-9250560 2835330, -9249947 2836819, -924…\n#> # ℹ 4 more rows\n```\n:::\n\n\n------------------------------------------------------------------------\n\nBut *this* (explicitly unioning the geometry) does work:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states |>\n  summarise(\n    n_states = n_distinct(NAME),\n    geometry = st_union(geometry),\n    .by = DIVISION\n  )\n#> Simple feature collection with 10 features and 2 fields\n#> Geometry type: GEOMETRY\n#> Dimension:     XY\n#> Bounding box:  xmin: -19951910 ymin: -1643353 xmax: 20021890 ymax: 11554350\n#> Projected CRS: WGS 84 / Pseudo-Mercator\n#>    DIVISION n_states                       geometry\n#> 1         5        9 MULTIPOLYGON (((-9250560 28...\n#> 2         3        5 POLYGON ((-9799335 4551032,...\n#> 3         4        7 POLYGON ((-10176807 4921011...\n#> 4         1        6 MULTIPOLYGON (((-7978692 50...\n#> 5         8        8 POLYGON ((-11473113 3798919...\n#> 6         9        5 MULTIPOLYGON (((-19000283 2...\n#> 7         2        3 POLYGON ((-8290777 4763109,...\n#> 8         7        4 POLYGON ((-10148561 3895849...\n#> 9         6        4 POLYGON ((-9840190 3523448,...\n#> 10        0        5 MULTIPOLYGON (((-18726019 -...\n```\n:::\n\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states |>\n  group_by(DIVISION) |>\n  summarise(\n    n_states = n_distinct(NAME),\n    geometry = st_union(geometry)\n  ) |>\n  st_as_sf() |>\n  ggplot() +\n  geom_sf(aes(fill = DIVISION)) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](spatial-data-attributes_files/figure-revealjs/unnamed-chunk-27-1.png){width=576}\n:::\n:::\n\n\n## Measuring geometries with `{sf}`\n\nNot all functions work with all geometry types!\n\n-   `st_area()` only works with POLYGON and MULTIPOLYGON geometries\n-   `st_length()` only works with LINESTRING and MULTILINSTRING geometries\n\n## Measuring geometries with `{sf}`\n\n-   `st_distance()` requires at least two objects\n\n## Measuring geometries with `{lwgeom}` and `{geosphere}`\n\n-   `lwgeom::st_perimeter()`\n-   `geosphere::bearing()`\n\n------------------------------------------------------------------------\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states |>\n  group_by(DIVISION) |>\n  summarise(\n    n_states = n_distinct(NAME)\n  )\n#> Simple feature collection with 10 features and 2 fields\n#> Geometry type: GEOMETRY\n#> Dimension:     XY\n#> Bounding box:  xmin: -19951910 ymin: -1643353 xmax: 20021890 ymax: 11554350\n#> Projected CRS: WGS 84 / Pseudo-Mercator\n#> # A tibble: 10 × 3\n#>   DIVISION n_states                                                  geometry\n#>   <chr>       <int>                                            <GEOMETRY [m]>\n#> 1 0               5 MULTIPOLYGON (((-18726019 -1633065, -18725998 -1633025, …\n#> 2 1               6 MULTIPOLYGON (((-7978692 5038758, -7978581 5039616, -797…\n#> 3 2               3 POLYGON ((-8290777 4763109, -8291389 4762454, -8291849 4…\n#> 4 3               5 POLYGON ((-9799335 4551032, -9799438 4550965, -9799539 4…\n#> 5 4               7 POLYGON ((-10176807 4921011, -10176847 4920961, -1017704…\n#> 6 5               9 MULTIPOLYGON (((-9250560 2835330, -9249947 2836819, -924…\n#> # ℹ 4 more rows\n```\n:::\n\n",
    "supporting": [
      "spatial-data-attributes_files/figure-revealjs"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}